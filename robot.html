<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />

<script type="text/javascript" src="http://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>

<script type="text/javascript" type="text/javascript">
  // Connecting to ROS
  // -----------------

  var ros = new ROSLIB.Ros({
    url : 'ws://localhost:9090'
  });

  ros.on('connection', function() {
    console.log('Connected to websocket server.');
  });

  ros.on('error', function(error) {
    console.log('Error connecting to websocket server: ', error);
  });

  ros.on('close', function() {
    console.log('Connection to websocket server closed.');
  });

  // Publishing a Topic
  // ------------------

  var cmdVel = new ROSLIB.Topic({
    ros : ros,
    name : '/cmd_vel',
    messageType : 'geometry_msgs/Twist'
  });
  var takeoff = new ROSLIB.Topic({
    ros : ros,
    name : '/ardrone/takeoff',
    messageType : 'std_msgs/Empty'
  });
  var land = new ROSLIB.Topic({
    ros : ros,
    name : '/ardrone/land',
    messageType : 'std_msgs/Empty'
  });


  var move_takeoff = new ROSLIB.Message({});
  
  var move_land = new ROSLIB.Message({});

  var move = new ROSLIB.Message({
    linear : {
      x : 0,
      y : 0,
      z : 0
    },
    angular : {
      x : 0,
      y : 0,
      z : 0
    }
  });
  function message_change(choice){
    
    move.linear.x = move.linear.y = move.linear.z = move.angular.x = move.angular.y = move.angular.z = 0;
    switch(choice) {
      case 1: // move forward
        move.linear.x=1;
        break;
      case 2: // move backward
        move.linear.x=1;
        break;
      case 3: // turn left
        move.angular.z=1;
        break;
      case 4: // turn right
        move.angular.z=-1;
        break;
      case 5: // move up
        move.linear.z=1;
        break;
      case 6: // move down
        move.linear.z=-1;
        break;
      case 7: // stop
        break;
      default: // no use, default case is just idling here
        break;
    }
    cmdVel.publish(move);
  }
</script>
</head>

<body>

 <button onclick=takeoff.publish(move_takeoff)>
  Takeoff
 </button>
 <button onclick=land.publish(move_land)>
  Land
</button>
<br>
<button onclick=message_change(1)>
  Move Forward
</button>
<button onclick=message_change(2)>
  Move Backward
</button> 
<button onclick=message_change(3)>
  Turn Left
</button>
<button onclick=message_change(4)>
  Turn Right
</button>
<br>
<button onclick=message_change(5)>
  Move Up
</button>
<button onclick=message_change(6)>
  Move Down
</button>
<br>
<button onclick=message_change(7)>
  Stop
</button>

</body>
</html>