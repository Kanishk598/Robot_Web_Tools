<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />

<script type="text/javascript" src="http://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>

<script type="text/javascript" type="text/javascript">
  // Connecting to ROS
  // -----------------

  var ros = new ROSLIB.Ros({
    url : 'ws://localhost:9090'
  });

  ros.on('connection', function() {
    console.log('Connected to websocket server.');
  });

  ros.on('error', function(error) {
    console.log('Error connecting to websocket server: ', error);
  });

  ros.on('close', function() {
    console.log('Connection to websocket server closed.');
  });

  // Publishing a Topic
  // ------------------

  var cmdVel = new ROSLIB.Topic({
    ros : ros,
    name : '/cmd_vel',
    messageType : 'geometry_msgs/Twist'
  });
  var takeoff = new ROSLIB.Topic({
    ros : ros,
    name : '/ardrone/takeoff',
    messageType : 'std_msgs/Empty'
  });
  var land = new ROSLIB.Topic({
    ros : ros,
    name : '/ardrone/land',
    messageType : 'std_msgs/Empty'
  });


  var move_takeoff = new ROSLIB.Message({});
  
  var move_land = new ROSLIB.Message({});

  var move_forward = new ROSLIB.Message({
    linear : {
      x : 1,
      y : 0,
      z : 0
    },
    angular : {
      x : 0,
      y : 0,
      z : 0
    }
  });
  var move_back = new ROSLIB.Message({
    linear : {
      x : -1,
      y : 0,
      z : 0
    },
    angular : {
      x : 0,
      y : 0,
      z : 0
    }
  });
  var move_left = new ROSLIB.Message({
    linear : {
      x : 0,
      y : 0,
      z : 0
    },
    angular : {
      x : 0,
      y : 0,
      z : 1
    }
  });
  var move_right = new ROSLIB.Message({
    linear : {
      x : 0,
      y : 0,
      z : 0
    },
    angular : {
      x : 0,
      y : 0,
      z : -1
    }
  });
  var stop = new ROSLIB.Message({
    linear : {
      x : 0,
      y : 0,
      z : 0
    },
    angular : {
      x : 0,
      y : 0,
      z : 0
    }
  });
  var move_up = new ROSLIB.Message({
    linear : {
      x : 0,
      y : 0,
      z : 1
    },
    angular : {
      x : 0,
      y : 0,
      z : 0
    }
  });
  var move_down = new ROSLIB.Message({
    linear : {
      x : 0,
      y : 0,
      z : -1
    },
    angular : {
      x : 0,
      y : 0,
      z : 0
    }
  });

  // Subscribing to a Topic
  // ----------------------
  //
  //var listener = new ROSLIB.Topic({
  //  ros : ros,
  //  name : '/listener',
  //  messageType : 'std_msgs/String'
  //});
//
  //listener.subscribe(function(message) {
  //  console.log('Received message on ' + listener.name + ': ' + message.data);
  //  listener.unsubscribe();
  //});


</script>
</head>

<body>
 <button onclick=takeoff.publish(move_takeoff)>
  Takeoff
 </button>
 <button onclick=land.publish(move_land)>
  Land
</button>
<br>
<button onclick=cmdVel.publish(move_forward)>
  Move Forward
</button>
<button onclick=cmdVel.publish(move_back)>
  Move Backward
</button> 
<button onclick=cmdVel.publish(move_left)>
  Turn Left
</button>
<button onclick=cmdVel.publish(move_right)>
  Turn Right
</button>
<br>
<button onclick=cmdVel.publish(move_up)>
  Move Up
</button>
<button onclick=cmdVel.publish(move_down)>
  Move Down
</button>
<br>
<button onclick=cmdVel.publish(stop)>
  Stop
</button>
</body>
</html>